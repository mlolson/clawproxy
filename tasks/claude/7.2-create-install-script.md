# Task 7.2: Create Install Script

**Assignee:** Claude
**Dependencies:** 7.1
**Status:** Open

## Description

Create a shell script for easy installation from GitHub releases.

## Acceptance Criteria

- [ ] Detect OS (Darwin/Linux)
- [ ] Detect architecture (x86_64/aarch64)
- [ ] Download correct binary from releases
- [ ] Install to /usr/local/bin (or user-specified location)
- [ ] Verify checksum (optional)
- [ ] Make binaries executable

## Implementation

```bash
#!/bin/bash
# install.sh - Install clawproxy

set -e

VERSION="${CLAWPROXY_VERSION:-0.1.0}"
INSTALL_DIR="${CLAWPROXY_INSTALL_DIR:-/usr/local/bin}"

# Detect OS
OS=$(uname -s | tr '[:upper:]' '[:lower:]')
case "$OS" in
    darwin) OS="macos" ;;
    linux) OS="linux" ;;
    *)
        echo "Unsupported OS: $OS"
        exit 1
        ;;
esac

# Detect architecture
ARCH=$(uname -m)
case "$ARCH" in
    x86_64) ARCH="x86_64" ;;
    arm64|aarch64) ARCH="aarch64" ;;
    *)
        echo "Unsupported architecture: $ARCH"
        exit 1
        ;;
esac

echo "Installing clawproxy v${VERSION} for ${OS}-${ARCH}..."

# Download URL
RELEASE_URL="https://github.com/YOUR_ORG/clawproxy/releases/download/v${VERSION}"
ARCHIVE="clawproxy-${VERSION}-${OS}-${ARCH}.tar.gz"

# Create temp directory
TMP_DIR=$(mktemp -d)
trap "rm -rf $TMP_DIR" EXIT

# Download
echo "Downloading ${ARCHIVE}..."
curl -fsSL "${RELEASE_URL}/${ARCHIVE}" -o "${TMP_DIR}/${ARCHIVE}"

# Extract
echo "Extracting..."
tar -xzf "${TMP_DIR}/${ARCHIVE}" -C "${TMP_DIR}"

# Install
echo "Installing to ${INSTALL_DIR}..."
if [ -w "$INSTALL_DIR" ]; then
    cp "${TMP_DIR}/clawproxy" "${INSTALL_DIR}/"
    cp "${TMP_DIR}/clawproxy-run" "${INSTALL_DIR}/"
else
    sudo cp "${TMP_DIR}/clawproxy" "${INSTALL_DIR}/"
    sudo cp "${TMP_DIR}/clawproxy-run" "${INSTALL_DIR}/"
fi

chmod +x "${INSTALL_DIR}/clawproxy"
chmod +x "${INSTALL_DIR}/clawproxy-run"

echo ""
echo "Successfully installed clawproxy v${VERSION}"
echo ""
echo "Next steps:"
echo "  clawproxy init"
echo "  clawproxy secret set openai"
echo "  clawproxy start"
```

## Usage

```bash
# Default installation
curl -fsSL https://raw.githubusercontent.com/YOUR_ORG/clawproxy/main/install.sh | bash

# Specific version
CLAWPROXY_VERSION=0.2.0 curl -fsSL ... | bash

# Custom install location
CLAWPROXY_INSTALL_DIR=~/.local/bin curl -fsSL ... | bash
```

## Release Archive Structure

```
clawproxy-0.1.0-macos-aarch64.tar.gz
├── clawproxy
├── clawproxy-run
└── README.md
```

## Notes

- Consider adding checksum verification
- Add `--help` flag for documentation
- Consider adding uninstall script
