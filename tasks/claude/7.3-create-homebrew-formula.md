# Task 7.3: Create Homebrew Formula

**Assignee:** Claude
**Dependencies:** 7.1
**Status:** Open

## Description

Create a Homebrew formula for easy macOS installation.

## Acceptance Criteria

- [ ] Create formula that builds from source
- [ ] Or create formula that downloads pre-built binaries
- [ ] Test installation on Intel and Apple Silicon
- [ ] Submit to homebrew-core or create tap

## Formula (Build from Source)

```ruby
# Formula/clawproxy.rb

class Clawproxy < Formula
  desc "Secure credential injection proxy for AI agents"
  homepage "https://github.com/YOUR_ORG/clawproxy"
  url "https://github.com/YOUR_ORG/clawproxy/archive/refs/tags/v0.1.0.tar.gz"
  sha256 "ACTUAL_SHA256_HERE"
  license "MIT"

  depends_on "rust" => :build

  def install
    system "cargo", "install", *std_cargo_args
  end

  def post_install
    (var/"log").mkpath
  end

  service do
    run [opt_bin/"clawproxy", "start"]
    keep_alive true
    log_path var/"log/clawproxy.log"
    error_log_path var/"log/clawproxy.log"
  end

  test do
    assert_match "clawproxy", shell_output("#{bin}/clawproxy --version")
  end
end
```

## Formula (Pre-built Binaries)

```ruby
class Clawproxy < Formula
  desc "Secure credential injection proxy for AI agents"
  homepage "https://github.com/YOUR_ORG/clawproxy"
  version "0.1.0"
  license "MIT"

  on_macos do
    on_arm do
      url "https://github.com/YOUR_ORG/clawproxy/releases/download/v0.1.0/clawproxy-0.1.0-macos-aarch64.tar.gz"
      sha256 "SHA256_ARM"
    end
    on_intel do
      url "https://github.com/YOUR_ORG/clawproxy/releases/download/v0.1.0/clawproxy-0.1.0-macos-x86_64.tar.gz"
      sha256 "SHA256_INTEL"
    end
  end

  def install
    bin.install "clawproxy"
    bin.install "clawproxy-run"
  end

  # ... service and test blocks same as above
end
```

## Creating a Tap

```bash
# Create tap repository
mkdir homebrew-clawproxy
cd homebrew-clawproxy
mkdir Formula
# Add formula file

# Users install with:
brew tap YOUR_ORG/clawproxy
brew install clawproxy
```

## Usage After Installation

```bash
# Install
brew install YOUR_ORG/clawproxy/clawproxy

# Start as service
brew services start clawproxy

# Or run manually
clawproxy start
```

## Notes

- sha256 must be updated for each release
- Test on both Intel and Apple Silicon
- Consider cask for GUI app (if applicable)
