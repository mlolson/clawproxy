# Task 8.3: Add --help Documentation

**Assignee:** Claude
**Dependencies:** 5.7
**Status:** Open

## Description

Add comprehensive help text to all CLI commands using clap attributes.

## Acceptance Criteria

- [ ] Main command help with overview
- [ ] Subcommand help for each command
- [ ] Examples in help text
- [ ] Document all flags and options
- [ ] Consistent formatting

## Implementation

```rust
use clap::{Parser, Subcommand};

/// ClawProxy - Secure credential injection for AI agents
///
/// ClawProxy protects your API keys from prompt injection attacks by:
/// - Injecting credentials at the proxy level
/// - Sandboxing agent processes to prevent secret access
///
/// Quick start:
///   clawproxy init
///   clawproxy secret set openai
///   clawproxy start
#[derive(Parser)]
#[command(name = "clawproxy")]
#[command(version, about, long_about)]
#[command(propagate_version = true)]
struct Cli {
    #[command(subcommand)]
    command: Commands,
}

#[derive(Subcommand)]
enum Commands {
    /// Initialize clawproxy configuration
    ///
    /// Creates the configuration directory, default config file,
    /// and system service files for automatic startup.
    ///
    /// Example:
    ///   clawproxy init
    Init,

    /// Start the proxy server
    ///
    /// Loads configuration, validates secrets, and starts listening
    /// for incoming requests. The proxy will inject credentials into
    /// outgoing requests based on the service configuration.
    ///
    /// Examples:
    ///   clawproxy start
    ///   clawproxy start --config /path/to/config.yaml
    Start {
        /// Path to config file
        #[arg(short, long, value_name = "FILE")]
        config: Option<PathBuf>,
    },

    /// Show proxy status
    ///
    /// Check if the proxy is running and display current configuration.
    Status,

    /// Manage API secrets
    ///
    /// Secrets are stored securely in ~/.config/clawproxy/secrets/
    /// with restricted permissions (mode 600).
    #[command(subcommand)]
    Secret(SecretCommands),

    /// Configure OpenClaw integration
    ///
    /// Automatically configures OpenClaw to use ClawProxy:
    /// - Migrates existing API keys to clawproxy secrets
    /// - Updates OpenClaw config to use proxy URLs
    /// - Modifies daemon service to run under sandbox
    ///
    /// Examples:
    ///   clawproxy configure-openclaw
    ///   clawproxy configure-openclaw --dry-run
    ///   clawproxy configure-openclaw --revert
    ConfigureOpenclaw {
        /// Show what would be changed without modifying files
        #[arg(long)]
        dry_run: bool,

        /// Restore original configuration from backups
        #[arg(long)]
        revert: bool,

        /// Only modify daemon service, skip config changes
        #[arg(long)]
        skip_config: bool,

        /// Only modify config, skip daemon changes
        #[arg(long)]
        skip_daemon: bool,
    },
}

#[derive(Subcommand)]
enum SecretCommands {
    /// Store a secret
    ///
    /// Reads the secret from stdin (for piping) or prompts interactively.
    ///
    /// Examples:
    ///   clawproxy secret set openai
    ///   echo "sk-xxx" | clawproxy secret set openai
    Set {
        /// Name of the secret (alphanumeric and underscores only)
        name: String,
    },

    /// List all stored secrets
    ///
    /// Shows secret names with masked previews and which services use them.
    List,

    /// Delete a secret
    ///
    /// Permanently removes the secret file. Will prompt for confirmation
    /// unless --force is used.
    Delete {
        /// Name of the secret to delete
        name: String,

        /// Skip confirmation prompt
        #[arg(short, long)]
        force: bool,
    },
}
```

## clawproxy-run Help

```rust
/// Run a command in a sandbox without access to API secrets
///
/// The sandbox prevents the command from reading the clawproxy secrets
/// directory while allowing all other normal operations. Environment
/// variables are set to route HTTP requests through the proxy.
///
/// Examples:
///   clawproxy-run ./my-agent --task "do something"
///   clawproxy-run python agent.py
///   clawproxy-run --proxy http://localhost:9000 npm run agent
#[derive(Parser)]
#[command(name = "clawproxy-run")]
#[command(version, about, long_about)]
struct Cli {
    /// Command to run
    #[arg(required = true)]
    command: String,

    /// Arguments to pass to command
    #[arg(trailing_var_arg = true)]
    args: Vec<String>,

    /// Path to config file
    #[arg(short, long, value_name = "FILE")]
    config: Option<PathBuf>,

    /// Proxy URL
    #[arg(long, default_value = "http://127.0.0.1:8080", value_name = "URL")]
    proxy: String,
}
```

## Help Output Example

```
$ clawproxy --help
ClawProxy - Secure credential injection for AI agents

ClawProxy protects your API keys from prompt injection attacks by:
- Injecting credentials at the proxy level
- Sandboxing agent processes to prevent secret access

Quick start:
  clawproxy init
  clawproxy secret set openai
  clawproxy start

Usage: clawproxy <COMMAND>

Commands:
  init               Initialize clawproxy configuration
  start              Start the proxy server
  status             Show proxy status
  secret             Manage API secrets
  configure-openclaw Configure OpenClaw integration
  help               Print this message or the help of subcommands

Options:
  -h, --help     Print help
  -V, --version  Print version
```

## Notes

- Use `#[command(about)]` for short description
- Use `#[command(long_about)]` for detailed description
- Include examples in long_about
- Document default values
